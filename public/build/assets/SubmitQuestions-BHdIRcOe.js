import{r as i,j as s,W as I,Y as S,d as A}from"./app-BFa-IAZl.js";import{I as w}from"./InputError-BLIi1pqW.js";import{I as $}from"./InputLabel-D47tXxuI.js";import{P as b}from"./PrimaryButton-CwTmQvPk.js";import{T as n}from"./TextInput-ICPI6ETg.js";const D=i.forwardRef(function({title:r="",options:h=[],className:f="",isFocused:u=!1,...g},l){const m=l||i.useRef();return i.useEffect(()=>{u&&m.current.focus()},[]),s.jsx("div",{className:"flex flex-col items-start",children:s.jsxs("select",{...g,className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm "+f,ref:m,children:[s.jsxs("option",{value:"",children:["Select a ",r]}),h.map((p,x)=>s.jsx("option",{value:p,children:p},x))]})})}),E=i.forwardRef(function({type:r="text",className:h="",isFocused:f=!1,...u},g){const l=g||i.useRef();return i.useEffect(()=>{f&&l.current.focus()},[]),s.jsx("div",{className:"flex flex-col items-start",children:s.jsx("textarea",{...u,type:r,className:"border-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm text-xs"+h,ref:l})})});function B(){const{data:o,setData:r,post:h,processing:f,errors:u,reset:g}=I({validate:!1,category:"",questions:[{question:"",choices:["","","",""],correctAnswer:""}]}),[l,m]=i.useState(!1),p=()=>{r({...o,questions:[...o.questions,{question:"",choices:["","","",""],correctAnswer:""}]})},x=(a,e)=>{let t=a.target.value,c=o;c.questions[e].question=t,r({...c}),console.log(o)},C=(a,e)=>{a.preventDefault();const t={...o};t.questions.splice(e,1),r(t),console.log(t)},j=(a,e)=>{let t=a.target.getAttribute("data-bind"),c=document.getElementById(t);for(var d=document.getElementsByTagName("input"),y=0;y<d.length;++y)d[y].type=="text"&&(d[y].disabled=!1);c.disabled=!0;let N=o;N.questions[e].correctAnswer=c.value,r({...N}),console.log(o)},v=(a,e)=>{let t=a.target.getAttribute("data-bind"),c=a.target.value,q=o.questions[e].choices;q[t]=c;let d=o;d.questions[e].choices=q,r({...d}),console.log(o)},_=a=>{a.preventDefault(),m(!0);let e=o.category.length>0;console.log(o.category.length);for(let t=0;t<o.questions.length;t++)e=e&&o.questions[t].question.length>=5&&o.questions[t].choices.length==4&&o.questions[t].choices[0].length>1&&o.questions[t].choices[1].length>1&&o.questions[t].choices[2].length>1&&o.questions[t].choices[3].length>1&&o.questions[t].correctAnswer.length>1,console.log(e);e&&(A.post("/submit_questions",{category:o.category,questions:JSON.stringify(o.questions)}).then(t=>console.log(t)).then(t=>{m(!1),alert("Questions Saved!")}).catch(t=>{alert(`${t} 
 Category already entered choice another`),m(!1)}),console.log(o))};return s.jsxs("div",{className:"w-full p-5 mx-auto md:w-1/2 shadow-lg mt-10",children:[s.jsx(S,{title:"Form"}),s.jsxs("form",{onSubmit:_,children:[s.jsxs("div",{className:"",children:[s.jsx($,{htmlFor:"Category",value:"Category"}),s.jsx(D,{id:"category",name:"category",title:"category",value:o.category,className:"mt-1 block w-full",autoComplete:"name",options:["cat1","cat2","cat3"],isFocused:!0,onChange:a=>r({...o,category:a.target.value.toString()}),required:!0}),s.jsx(w,{message:u.category,className:"mt-2"})]}),s.jsx("div",{className:"mt-4",children:o.questions.map((a,e)=>s.jsxs("div",{children:[console.log(a),s.jsx($,{htmlFor:e,value:`Question ${e+1}`}),s.jsx(E,{id:e,name:e,type:"text",onChange:t=>x(t,e),required:!0,value:a.question,className:"mt-1 block w-full"}),s.jsx(w,{message:u.category,className:"mt-2"}),s.jsxs("div",{className:"flex flex-wrap",children:[s.jsxs("div",{className:"mt-2 mr-5 w-15",children:[s.jsx(n,{required:!0,onChange:t=>{j(t,e)},className:"mr-1",type:"radio","data-bind":`option1${e}`,name:`question_${e+1}`}),s.jsx(n,{required:!0,value:a.choices[0],onChange:t=>{v(t,e)},type:"text",id:`option1${e}`,"data-bind":0,name:`option_1_${e+1}`})]}),s.jsxs("div",{className:"mt-2 mr-5 w-15",children:[s.jsx(n,{required:!0,onChange:t=>{j(t,e)},className:"mr-1","data-bind":`option2${e}`,type:"radio",name:`question_${e+1}`}),s.jsx(n,{required:!0,value:a.choices[1],onChange:t=>{v(t,e)},type:"text",id:`option2${e}`,"data-bind":1,name:`option_2_${e+1}`})]}),s.jsxs("div",{className:"mt-2 mr-5 w-15",children:[s.jsx(n,{required:!0,onChange:t=>{j(t,e)},className:"mr-1","data-bind":`option3${e}`,type:"radio",name:`question_${e+1}`}),s.jsx(n,{required:!0,value:a.choices[2],onChange:t=>{v(t,e)},type:"text",id:`option3${e}`,"data-bind":2,name:`option_3_${e+1}`})]}),s.jsxs("div",{className:"mt-2 mr-5 w-15",children:[s.jsx(n,{required:!0,onChange:t=>{j(t,e)},className:"mr-1","data-bind":`option4${e}`,type:"radio",name:`question_${e+1}`}),s.jsx(n,{required:!0,value:a.choices[3],onChange:t=>{v(t,e)},type:"text",id:`option4${e}`,"data-bind":3,name:`option_4_${e+1}`})]})]}),s.jsx("div",{className:"flex flex-reverse",children:o.questions.length>1&&s.jsx(b,{className:"ml-auto auto bg-ruby ",onClick:t=>C(t,e),children:"Delete"})})]},e))}),s.jsx(b,{className:"bg-blue mt-2",onClick:()=>p(),children:"Add"}),s.jsx("div",{className:"flex items-center justify-center mt-4",children:s.jsx(b,{className:"ms-4 w-32  bg-blue",disabled:l,children:s.jsx("p",{className:"mx-auto text-center",children:"Submit"})})})]})]})}export{B as default};
